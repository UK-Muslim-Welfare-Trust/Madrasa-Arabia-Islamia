import{initializeMessaging as o}from"./firebase-init.mjs";import{getToken as s}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-messaging.js";import{getFunctions as t,httpsCallable as e}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-functions.js";export async function subscribeToTopic(i){const{messaging:r,messagingSupported:n}=await o();if(!n)return alert("Push notifications are not supported on this device."),!1;try{const o=await s(r,{vapidKey:"BCiOgp50gotHnfdiLjtx86mJZ-hGV94JWVuLjsiPsBd-CFAMpg8REdBZs6zb0Ofr5Lpo7Ezu50yAfEhgmcqIcMY"});if(o){const s=t(),r=e(s,"manageSubscription");return await r({token:o,topic:i,action:"subscribe"}),console.log(`Request to subscribe to ${i} sent.`),!0}return console.error("Failed to get FCM token. User might have denied permission."),!1}catch(o){return console.error(`Error subscribing to ${i}:`,o),alert("Could not subscribe to notifications. Please check console for details."),!1}}export async function unsubscribeFromTopic(i){const{messaging:r}=await o(),n=await s(r,{vapidKey:"BCiOgp50gotHnfdiLjtx86mJZ-hGV94JWVuLjsiPsBd-CFAMpg8REdBZs6zb0Ofr5Lpo7Ezu50yAfEhgmcqIcMY"});if(n)try{const o=t(),s=e(o,"manageSubscription");await s({token:n,topic:i,action:"unsubscribe"}),console.log(`Request to unsubscribe from ${i} sent.`)}catch(o){console.error(`Error unsubscribing from ${i}:`,o)}else console.log("No token available, cannot unsubscribe.")}