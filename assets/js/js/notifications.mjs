import{initializeMessaging as t}from"./firebase-init.mjs";import{getToken as e}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-messaging.js";const o="https://us-central1-wakefield-central-mosque.cloudfunctions.net/manageSubscription";export async function subscribeToTopic(s,i){if(!i)return!1;const{messaging:r,messagingSupported:n}=await t();if(!n)return!1;try{const t=await e(r,{vapidKey:"BCiOgp50gotHnfdiLjtx86mJZ-hGV94JWVuLjsiPsBd-CFAMpg8REdBZs6zb0Ofr5Lpo7Ezu50yAfEhgmcqIcMY",serviceWorkerRegistration:i});return!!t&&(await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,topic:s,action:"subscribe"})}),console.log(`Request to subscribe to ${s} sent.`),!0)}catch(t){return console.error(`Error subscribing to ${s}:`,t),alert("Could not subscribe to notifications. Please check console for details."),!1}}export async function unsubscribeFromTopic(s,i){if(!i)return;const{messaging:r}=await t(),n=await e(r,{serviceWorkerRegistration:i});if(n)try{await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,topic:s,action:"unsubscribe"})}),console.log(`Request to unsubscribe from ${s} sent.`)}catch(t){console.error(`Error unsubscribing from ${s}:`,t)}}