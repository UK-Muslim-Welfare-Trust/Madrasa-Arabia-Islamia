import{doc as t,onSnapshot as e,setLogLevel as n}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";const o=document.getElementById("dateTodayC"),a=document.getElementById("dateTodayI"),r=document.getElementById("pt-fajr"),i=document.getElementById("pt-zuhr"),s=document.getElementById("pt-asr"),d=document.getElementById("pt-maghrib"),c=document.getElementById("pt-isha"),m=document.getElementById("pt-jummah");document.addEventListener("DOMContentLoaded",(async function(){!function(){const t=new Date;o.textContent=t.toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"})}(),await async function(){try{const t=new Date,e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear(),r=await fetch(`https://api.aladhan.com/v1/gToH?date=${e}-${n}-${o}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=await r.json();if(200===i.code&&i.data.hijri){const t=i.data.hijri;a.textContent=`${t.day} ${t.month.en} ${t.year}`}else a.textContent="Hijri date unavailable"}catch(t){console.error("Could not fetch Hijri date:",t),a.textContent="Could not load Hijri date"}}();const n=setInterval((()=>{if(void 0!==window.firebaseDb){clearInterval(n),console.log("Firebase DB instance found. Subscribing to prayer times.");!function(n){const o="/artifacts/masjid-connect-app/public/data/prayerTimes/today";console.log(`Listening for prayer times at: ${o}`);const a=t(n,o);e(a,(t=>{if(t.exists()){console.log("Received prayer times data:",t.data());const e=t.data();r.textContent=e.Fajr||"00:00",i.textContent=e.Zuhr||"00:00",s.textContent=e.Asr||"00:00",d.textContent=e.Maghrib||"00:00",c.textContent=e.Isha||"00:00",m.textContent=e.Jumma||"00:00"}else console.warn("Prayer times document does not exist for today at path:",o),r.textContent="N/A",i.textContent="N/A",s.textContent="N/A",d.textContent="N/A",c.textContent="N/A",m.textContent="N/A"}),(t=>{console.error("Error listening to prayer times:",t)}))}(window.firebaseDb)}else console.log("Waiting for Firebase DB instance to become available...")}),100)}));