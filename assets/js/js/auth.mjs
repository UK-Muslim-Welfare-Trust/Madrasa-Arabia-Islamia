import{auth as i,db as t}from"./firebase-init.mjs";import{onAuthStateChanged as o,signOut as e}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";import{doc as n,getDoc as a}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";window.location.pathname.includes("/admin/")&&o(i,(async o=>{if(o){await async function(i){if(!i)return!1;const o=n(t,"admins",i);try{return(await a(o)).exists()}catch(i){return console.error("Error checking admin status:",i),!1}}(o.uid)||(alert("Access Denied. You are not an authorized admin."),await e(i),window.location.href="/login.html")}else{const i=window.location.pathname+window.location.search;window.location.href=`/login.html?redirect=${encodeURIComponent(i)}`}}));