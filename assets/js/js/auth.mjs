import{auth as e,db as i}from"./firebase-init.mjs";import{onAuthStateChanged as o,signOut as n}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";import{doc as s,getDoc as t}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";window.location.pathname.includes("/admin/")&&o(e,(async o=>{if(o){console.log("User is signed in. Verifying admin privileges...");await(async e=>{if(!e)return console.log("isAdmin check failed: No UID provided."),!1;const o=s(i,"admins",e);try{return console.log(`Checking admin status for UID: ${e}`),(await t(o)).exists()?(console.log("Admin status confirmed."),!0):(console.warn("Access denied: User is not listed in the admins collection."),!1)}catch(e){return console.error("Error checking admin status:",e),!1}})(o.uid)?console.log("Admin access granted."):(alert("Access Denied. You are not an authorized admin. You will be signed out."),await n(e),window.location.href="/login.html")}else{console.log("No user signed in. Redirecting to login page.");const e=window.location.pathname+window.location.search;window.location.href=`/login.html?redirect=${encodeURIComponent(e)}`}}));