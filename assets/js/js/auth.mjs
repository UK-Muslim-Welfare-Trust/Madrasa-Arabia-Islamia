import{auth as i,db as t}from"./firebase-init.mjs";import{onAuthStateChanged as e,signOut as o}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";import{doc as a,getDoc as n}from"https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";window.location.pathname.includes("/admin/")&&e(i,(async e=>{if(e)await(async i=>{if(!i)return!1;try{return(await n(a(t,"admins",i))).exists()}catch(i){return console.error("Error checking admin status:",i),!1}})(e.uid)||(alert("Access Denied. You are not an authorized admin."),await o(i),window.location.href="/login.html");else{const i=window.location.pathname+window.location.search;window.location.href=`/login.html?redirect=${encodeURIComponent(i)}`}}));