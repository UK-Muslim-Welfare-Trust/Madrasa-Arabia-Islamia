import{requestNotificationPermission as e,scheduleJamaatNotifications as t}from"./notifications.mjs";import{messagingSupported as o}from"./firebase-init.mjs";var n;document.addEventListener("DOMContentLoaded",(()=>{let n;"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>console.log("ServiceWorker registration successful.",e))).catch((e=>console.error("ServiceWorker registration failed: ",e)))}));const i=document.getElementById("install-button");if(window.matchMedia("(display-mode: standalone)").matches)i&&(i.style.display="none"),function(){const n=document.getElementById("notification-controls"),i=document.getElementById("jamaat-notifications-toggle");if(!n||!i)return;if(!window.location.pathname.includes("prayerTimetable.html")||!o)return;n.style.display="block","true"===localStorage.getItem("jamaatNotificationsEnabled")&&(i.checked=!0,"granted"===Notification.permission&&t());i.addEventListener("change",(()=>{i.checked?(localStorage.setItem("jamaatNotificationsEnabled","true"),e().then((e=>{e?t():(i.checked=!1,localStorage.setItem("jamaatNotificationsEnabled","false"))}))):localStorage.setItem("jamaatNotificationsEnabled","false")}))}();else{const e=document.getElementById("notification-controls");e&&(e.style.display="none"),window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),n=e,i&&(i.style.display="block")})),i&&i.addEventListener("click",(async()=>{if(n){i.style.display="none",n.prompt();const{outcome:e}=await n.userChoice;console.log(`User response to the install prompt: ${e}`),n=null}}))}})),n=jQuery,setTimeout((function(){n("#spinner").length>0&&n("#spinner").removeClass("show")}),1),"undefined"!=typeof WOW&&(new WOW).init(),n(window).scroll((function(){n(this).scrollTop()>300?n(".sticky-top").addClass("shadow-sm").css("top","0px"):n(".sticky-top").removeClass("shadow-sm").css("top","-150px")})),n(window).scroll((function(){n(this).scrollTop()>100?n(".back-to-top").fadeIn("slow"):n(".back-to-top").fadeOut("slow")})),n(".back-to-top").click((function(){return n("html, body").animate({scrollTop:0},1500,"easeInOutExpo"),!1}));