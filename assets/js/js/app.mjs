import{requestNotificationPermission as e,scheduleJamaatNotifications as t}from"./notifications.mjs";import{messagingSupported as o}from"./firebase-init.mjs";var n;document.addEventListener("DOMContentLoaded",(()=>{let n;"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>console.log("ServiceWorker registration successful.",e))).catch((e=>console.error("ServiceWorker registration failed: ",e)))}));const s=document.getElementById("install-button"),i=document.getElementById("notification-controls"),a=document.getElementById("jamaat-notifications-toggle");window.matchMedia("(display-mode: standalone)").matches?(console.log("App is running in standalone mode."),s&&(s.style.display="none"),i&&window.location.pathname.includes("prayerTimetable.html")&&o&&(i.style.display="block","true"===localStorage.getItem("jamaatNotificationsEnabled")&&(a.checked=!0,"granted"===Notification.permission&&t()),a.addEventListener("change",(()=>{a.checked?(localStorage.setItem("jamaatNotificationsEnabled","true"),e().then((e=>{e?t():(a.checked=!1,localStorage.setItem("jamaatNotificationsEnabled","false"))}))):localStorage.setItem("jamaatNotificationsEnabled","false")})))):(console.log("App is running in the browser."),i&&(i.style.display="none"),window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),n=e,s&&(s.style.display="block",console.log("`beforeinstallprompt` event was fired, showing install button."))})),s&&s.addEventListener("click",(async()=>{if(n){s.style.display="none",n.prompt();const{outcome:e}=await n.userChoice;console.log(`User response to the install prompt: ${e}`),n=null}})))})),n=jQuery,setTimeout((function(){n("#spinner").length>0&&n("#spinner").removeClass("show")}),1),"undefined"!=typeof WOW&&(new WOW).init(),n(window).scroll((function(){n(this).scrollTop()>300?n(".sticky-top").addClass("shadow-sm").css("top","0px"):n(".sticky-top").removeClass("shadow-sm").css("top","-150px")})),n(window).scroll((function(){n(this).scrollTop()>100?n(".back-to-top").fadeIn("slow"):n(".back-to-top").fadeOut("slow")})),n(".back-to-top").click((function(){return n("html, body").animate({scrollTop:0},1500,"easeInOutExpo"),!1}));